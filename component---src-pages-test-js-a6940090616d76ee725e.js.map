{"version":3,"file":"component---src-pages-test-js-a6940090616d76ee725e.js","mappings":"mPAQA,MAsEaA,EAAOC,IAAc,IAAb,KAAEC,GAAMD,EAC3B,OACEE,EAAAA,cAACC,EAAAA,EAAG,CACFC,MAAO,UACPC,SAAU,GACVC,YAAa,+BACb,EAIN,UAhFcC,IAGR,IAAAC,EAAA,IAHS,KACbP,EAAI,SACJQ,GACDF,EACC,MAAMG,EAAWT,EAAKU,KAAKC,aAAaF,SAExC,IAAIG,EAAO,IAAIC,KACXC,EAAMC,SAASH,EAAKI,mBAAmB,SAASC,WAAW,IAAK,IAAK,IACzE,MAAM,EAACC,EAAO,EAAEC,IAAcC,EAAAA,EAAAA,WAAS,IACjC,EAACC,EAAQ,EAAEC,IAAeF,EAAAA,EAAAA,UAAS,KACnC,EAACG,EAAO,EAAEC,IAAcJ,EAAAA,EAAAA,UAAS,KACjC,EAACK,EAAM,EAAEC,IAAaN,EAAAA,EAAAA,UAAS,KAC/B,EAACO,EAAG,EAAEC,IAAUR,EAAAA,EAAAA,UAASN,IAC/Be,EAAAA,EAAAA,YAAU,KAERC,MAAM,mDAAmDH,WACtDI,MAAKC,GAAYA,EAASC,SAC1BF,MAAKG,IACJ,IAAIC,EAAOD,EACX,MAAME,EAAUD,EAAKE,KAAKC,GACjBA,EAAIC,YAGPC,GAAMC,EAAAA,EAAAA,GAAO,IAAIC,IAAIN,IACrBO,EAAWR,EAAKE,KAAKC,GAClBA,EAAIM,SAASC,MAAM,OACzBC,OACH,IAAIC,GAAON,EAAAA,EAAAA,GAAO,IAAIC,IAAIC,IAE1BI,EAAUA,EAAQC,QAAOC,GAAKxC,EAASyC,SAASD,KAChDT,EAAOW,OAAS,GAChB7B,EAAYY,GACZV,EAAWuB,GACXrB,EAAUc,GACVrB,GAAW,EAAM,GACjB,GACH,IACH,IAAIiC,EAAY,UAEhB,MAAMC,GAAkC,QAAtB9C,EAAAP,EAAKU,KAAKC,oBAAY,IAAAJ,OAAA,EAAtBA,EAAwBJ,QAAS,QACnD,OAAIe,EACKjB,EAAAA,cAAAA,EAAAA,SAAA,MAGPA,EAAAA,cAAAA,EAAAA,SAAA,KACEA,EAAAA,cAACqD,EAAAA,EAAM,CAAC9C,SAAUA,EAAUL,MAAOkD,GACjCpD,EAAAA,cAAA,WACEsD,UAAU,YACVC,WAAS,EACTC,SAAS,6BAETxD,EAAAA,cAAA,cACEA,EAAAA,cAAA,MAAIyD,SAAS,YAAW,IAAE,aAAeN,GACzCnD,EAAAA,cAAA,SAAG,oBAGLA,EAAAA,cAAC0D,EAAAA,EAAM,CAACxB,KAAMd,EAAU0B,QAASxB,EAASiB,OAAQf,IAClDxB,EAAAA,cAAA,WACAA,EAAAA,cAAC2D,EAAAA,EAAK,CACJzD,MAAOiD,EACPS,IAAK,KAEP5D,EAAAA,cAAA,cACEA,EAAAA,cAAC6D,EAAAA,EAAG,SAIT,C","sources":["webpack://gatsby-starter-blog/./src/pages/test.js"],"sourcesContent":["import React, { useState, useEffect } from \"react\"\r\nimport { graphql } from \"gatsby\"\r\nimport Bio from \"../components/bio\"\r\nimport Layout from \"../components/layout\"\r\nimport Seo from \"../components/seo\"\r\nimport Share from \"../components/share\"\r\nimport Search from \"../components/search\"\r\n\r\nconst Novel = ({\r\n  data,\r\n  location,\r\n}) => {\r\n  const catesafe = data.site.siteMetadata.catesafe\r\n  //現在の日付\r\n  var date = new Date();\r\n  var kyou= parseInt(date.toLocaleDateString('sv-SE').replaceAll('-', ''), 10)\r\n  const [loading, setLoading] = useState(true);\r\n  const [bookData, setBookData] = useState([])\r\n  const [cateTag, setCateTag] = useState([])\r\n  const [pubTag, setPubtag] = useState([])\r\n  const [day, setDay] = useState(kyou)\r\n  useEffect(() => {\r\n    // get data from GitHub api\r\n    fetch(`https://kyukyunyorituryo.github.io/new_pub/json/${day}j.json`)\r\n      .then(response => response.json()) // parse JSON from request\r\n      .then(resultData => {\r\n        var book = resultData\r\n        const publist = book.map((num) => {\r\n          return num.Publisher;\r\n        });\r\n\r\n        const pubtag = [...new Set(publist)];\r\n        const catelist = book.map((num) => {\r\n          return num.Category.split(\",\");\r\n        }).flat();\r\n        var catetag = [...new Set(catelist)];\r\n\r\n        catetag = catetag.filter(x => catesafe.includes(x))\r\n        pubtag.length = 10\r\n        setBookData(resultData)\r\n        setCateTag(catetag)\r\n        setPubtag(pubtag)\r\n        setLoading(false);\r\n      }) // set data for the number of stars\r\n  }, [])\r\n  var freetitle = `小説の新刊一覧`\r\n  //catetag.length=10\r\n  const siteTitle = data.site.siteMetadata?.title || `Title`\r\n  if (loading) {\r\n    return <></>;\r\n  }\r\n  return (\r\n    <>\r\n      <Layout location={location} title={siteTitle}>\r\n        <article\r\n          className=\"blog-post\"\r\n          itemScope\r\n          itemType=\"http://schema.org/Article\"\r\n        >\r\n          <header>\r\n            <h1 itemProp=\"headline\"> {`「Kindle新刊」` + freetitle}</h1>\r\n            <p>最近発売された小説の一覧ページ</p>\r\n          </header>\r\n\r\n          <Search book={bookData} catetag={cateTag} pubtag={pubTag}/>\r\n          <hr />\r\n          <Share\r\n            title={freetitle}\r\n            url={``}\r\n          />\r\n          <footer>\r\n            <Bio />\r\n          </footer>\r\n        </article>\r\n      </Layout>\r\n    </>\r\n  )\r\n}\r\nexport const Head = ({ data }) => {\r\n  return (\r\n    <Seo\r\n      title={`小説の新刊一覧`}\r\n      ogpimage={''}\r\n      description={`小説の新刊一覧、最近発売された小説を一覧で表示します。`}\r\n    />\r\n  )\r\n}\r\n\r\nexport default Novel\r\n\r\n/**\r\n * Head export to define metadata for the page\r\n *\r\n * See: https://www.gatsbyjs.com/docs/reference/built-in-components/gatsby-head/\r\n */\r\n//export const Head = () => <Seo title=\"kindle本セール品を一覧で表示する「kindleセールチェック」\" />\r\n\r\nexport const pageQuery = graphql`\r\nquery MyQuery {\r\n  site {\r\n    siteMetadata {\r\n      title\r\n      siteUrl\r\n      catesafe\r\n    }\r\n  }\r\n}\r\n`\r\n"],"names":["Head","_ref2","data","React","Seo","title","ogpimage","description","_ref","_data$site$siteMetada","location","catesafe","site","siteMetadata","date","Date","kyou","parseInt","toLocaleDateString","replaceAll","loading","setLoading","useState","bookData","setBookData","cateTag","setCateTag","pubTag","setPubtag","day","setDay","useEffect","fetch","then","response","json","resultData","book","publist","map","num","Publisher","pubtag","_toConsumableArray","Set","catelist","Category","split","flat","catetag","filter","x","includes","length","freetitle","siteTitle","Layout","className","itemScope","itemType","itemProp","Search","Share","url","Bio"],"sourceRoot":""}